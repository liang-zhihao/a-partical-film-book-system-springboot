(this.webpackJsonpcinema=this.webpackJsonpcinema||[]).push([[0],{1635:function(e,t){},1636:function(e,t,a){},1637:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),o=a.n(c),i=a(35),l=a(27),s=a(83),u=a(55),m=a(21),d=a(22),p=a(23),f=a(24),h=a(37),b=a.n(h),v=a(1661),y=a(1664),E=a(1660),g=a(220),O=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.visible;return r.a.createElement(v.a,{as:E.a,width:"thin",animation:"push",direction:"left",vertical:!0,icon:"labeled",visible:e},r.a.createElement(l.c,{to:"/admin/user-manage"},r.a.createElement(E.a.Item,{icon:"users",name:"User Manage"})),r.a.createElement(l.c,{to:"/admin/admin-manage"},r.a.createElement(E.a.Item,{icon:"user md",name:"Admin Manage"})),r.a.createElement(l.c,{to:"/admin/order-manage"},r.a.createElement(E.a.Item,{icon:"server",name:"Order Manage"})),r.a.createElement(l.c,{to:"/admin/session-manage"},r.a.createElement(E.a.Item,{icon:"compose",name:"Session Manage"})),r.a.createElement(l.c,{to:"/admin/film-manage"},r.a.createElement(E.a.Item,{icon:"film",name:"Film Manage"})),r.a.createElement(l.c,{to:"/admin/cinema-manage"},r.a.createElement(E.a.Item,{icon:"home",name:"Cinema Manage"})),r.a.createElement(l.c,{to:"/admin/comment-manage"},r.a.createElement(E.a.Item,{icon:"comments",name:"Comment Manage"})))}}]),a}(n.Component),j=a(11),k=a.n(j),w=a(28),C=a(25),x=a(12),I=a(50),S=a(45),P=a(42),K=a(1655),N=a(1653),D=function(e){var t=e.formProps,a=(Object(P.a)(e,["formProps"]),t.getErrorProp),n=t.fieldValidate,c=t.updateFormMsg,o=t.updateField,i=t.state,l=t.setState,s=t.title,u=t.initVal,m=t.placeholder,d=t.dataKey,p=t.descriptors,f=K.a.Field,h=Object(S.a)({},d,p[d]);return r.a.createElement(f,{control:N.a,label:s,placeholder:m,value:u||"",onChange:function(e){o(e,i,l)},name:d,error:a(d,i),onBlur:function(){var e=Object(C.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(h,i);case 2:a=e.sent,c(a,i,l);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},F=(a(39),"/user"),T="/cinema",A="/film",R="/order",M="/type",V="/admin",z=function(e){return{required:!0,message:e+" is required"}},L=function(e,t,a){return{min:e,max:t,message:a+": maximum length is "+t+" and  minimum is "+e}},H={string:"string",number:"number",boolean:"boolean",method:"function",regexp:"regexp",integer:"integer",float:"float",array:"array",object:"object",enum:"enum",date:"date",url:"url",email:"email"},U=function(e){return{type:e,message:"require "+e}},B=function(e,t){return e="http://localhost:8090/api"+e,{asyncValidator:function(){var a=Object(C.a)(k.a.mark((function a(n,r){var c;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={params:Object(S.a)({},t,r)},0,a.abrupt("return",new Promise((function(a,n){b.a.get(e,c).then((function(e){console.log(e),200!==e.data.code?n(t+" is duplicate"):a()})).catch((function(e){n(t+" is duplicate"),console.error(e)}))})));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}},W=a(1662),Y=a(1663),q=function(e){var t=e.formProps,a=t.dispatch,n=t.updateFormMsg,c=t.fieldValidate,o=t.canDispatch,i=t.createStateFromDataProps,l=t.clearInputVal,s=t.formFields,u=t.header,m=t.dataProps,d=t.type,p=t.state,f=t.setState,h=t.descriptors,b=t.api;return r.a.createElement(W.a,{stacked:!0,size:"huge"},r.a.createElement(Y.a,null,u),r.a.createElement(K.a,null,r.a.createElement(g.a,{floated:"right",color:"red",size:"mini",icon:"undo",onClick:function(){var e=i(!1,m),t=l(e,p);f(Object(x.a)({},t))},content:"Clear All"}),s,r.a.createElement(g.a,{positive:!0,icon:"checkmark",type:"submit",labelPosition:"right",onClick:function(){var e=Object(C.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(h,p);case 2:r=e.sent,n(r,p,f),o(r)&&a(d,p,b);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),content:"OK"})))},G=V,J=function(e){var t=e.rowData,a=e.type,c=e.formProps,o={update:"Edit an admin",create:"Add an admin"};o=o[a];var i={username:{descriptor:{username:[z("username")]},dataKey:"username",title:"Username",placeholder:"Please enter username"},password:{descriptor:{password:[z("password")]},dataKey:"password",title:"Password",placeholder:"Please enter password"}},l=c,s=(l.dispatch,l.updateFormMsg,l.fieldValidate,l.canDispatch,l.getDescriptors),u=l.createStateFromDataProps,m=(l.clearInputVal,Object(n.useState)((function(){var e=void 0!==t,a=u(e,i,t);return Object(x.a)({},a,{cinemaId:e?t.adminId:"",errMsg:{}})}))),d=Object(I.a)(m,2),p=d[0],f=d[1],h=s(i);c=Object(x.a)({},c,{state:p,setState:f,descriptors:h,header:o,dataProps:i,type:a,api:G});K.a.Field;var b=function(){var e=[],t=0;return e.push(function(e){var t=Object(x.a)({},i.username,{initVal:p.username});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(t++)),e.push(function(e){var t=Object(x.a)({},i.password,{initVal:p.password});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(t++)),e}();return c=Object(x.a)({},c,{formFields:b}),r.a.createElement(q,{formProps:c})},$=a(154),_=window.sessionStorage,Q={};function X(){return _.getItem("accessToken")}function Z(e){window.sessionStorage.setItem("accessToken",e)}function ee(){var e=X();return null===e||"-1"===e}function te(){window.sessionStorage.setItem("accessToken","-1")}function ae(){return!ee()}function ne(){return re.apply(this,arguments)}function re(){return(re=Object(C.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={accessToken:X()},e.next=3,we(t).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=a(165),oe=a(1659),ie=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).defaultProps={header:"",content:""},e.state={open:!1,header:"",content:"",error:!1},e.show=function(t,a,n){n="error"===n,e.setState({open:!0,header:t,content:a,error:n}),setTimeout((function(){e.setState({open:!1})}),1e4)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.header,c=t.content,o=t.error;return r.a.createElement(ce.a,{size:"mini",onClose:function(){e.setState({open:!1})},open:a},r.a.createElement(oe.a,{error:o,header:n,content:c}))}}]),a}(n.Component),le=document.createElement("div");document.body.appendChild(le);var se=o.a.render(r.a.createElement(ie,{}),le),ue="http://localhost:8090/api",me=function(){var e=X();return ee()?Q:Q={Authorization:e="Bearer "+e}}(),de=b.a.create({baseURL:ue,timeout:1e4,headers:me});function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(C.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,de.get(t).then((function(e){return console.log(e),(a=e.data.data).map((function(e){return e.editable=!1,e.checked=!1,null})),a})).catch((function(e){console.error(e)}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){return be.apply(this,arguments)}function be(){return(be=Object(C.a)(k.a.mark((function e(t,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.put(t,a).then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(C.a)(k.a.mark((function e(t,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ue+t,e.next=3,de.delete(t,{params:a}).then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(C.a)(k.a.mark((function e(t,a){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a,de.post(t,n).then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return je.apply(this,arguments)}function je(){return(je=Object(C.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,de.get(t,"").then((function(e){return console.log(e),(a=e.data.data).editable=!1,a})).catch((function(e){console.error(e)}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(C.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(ue+"/auth",t).then((function(e){return Z(e.data.data.accessToken),console.log("successfully login, token is "+X()),e.data})).catch((function(e){se.show("Login failed","please contact your admin","error"),console.error(e)}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(C.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(ue+"/user/accessToken",t).then((function(e){return e.data.data})).catch((function(e){console.error(e)}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe={dispatch:function(){var e=Object(C.a)(k.a.mark((function e(t,a,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="update"===e.t0?3:"create"===e.t0?6:9;break;case 3:return e.next=5,he(n,a);case 5:return e.abrupt("break",10);case 6:return e.next=8,Ee(n,a);case 8:case 9:return e.abrupt("break",10);case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),fieldValidate:function(){var e=Object(C.a)(k.a.mark((function e(t,a){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new $.a(t),e.abrupt("return",n.validate(a).then((function(){for(var e=[],a=0,n=Object.keys(t);a<n.length;a++){var r=n[a];e.push({field:r,message:null})}return e})).catch((function(e){var t=e.errors;e.fields;return t})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),updateField:function(e,t,a){a(Object(x.a)({},t,Object(S.a)({},e.target.name,e.target.value)))},getErrorProp:function(e,t){return t.errMsg[e]},updateFormMsg:function(e,t,a){var n,r=null===t.errMsg?{}:t.errMsg,c=Object(w.a)(e);try{for(c.s();!(n=c.n()).done;){var o=n.value;r[o.field]=o.message}}catch(i){c.e(i)}finally{c.f()}a(Object(x.a)({},t,{errMsg:r}))},canDispatch:function(e){var t,a=Object(w.a)(e);try{for(a.s();!(t=a.n()).done;){if(null!==t.value.message)return!1}}catch(n){a.e(n)}finally{a.f()}return!0},getDescriptors:function(e){for(var t={},a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];void 0!==e[r].descriptor&&Object.assign(t,e[r].descriptor)}return t},createStateFromDataProps:function(e,t,a){for(var n={},r=0,c=Object.keys(t);r<c.length;r++){var o=c[r];Object.assign(n,Object(S.a)({},o,e?a[o]:""))}return n},clearInputVal:function(e,t){var a=t;return a=Object.assign(a,e)}},Ie=a(1652),Se=a(13),Pe=function(e){var t=e.rowData,a=e.dataKey,n=e.onClick,c=e.idName,o=Object(P.a)(e,["rowData","dataKey","onClick","idName"]),i=t[a];return r.a.createElement(Se.a,o,r.a.createElement(Ie.a,{checked:i,onClick:function(e,a){n(a,t[c])}}))},Ke=function(e){var t=e.rowData,a=e.dataKey,n=e.onClick,c=Object(P.a)(e,["rowData","dataKey","onClick"]);return r.a.createElement(Se.a,Object.assign({},c,{style:{padding:"6px 0"}}),r.a.createElement(g.a,{appearance:"link",onClick:function(){n(a,t[a])}},"Delete"))},Ne=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={list:[],checkedAll:!1,rowHeight:50},e.updateTable=Object(C.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:pe(e.props.url).then((function(t){e.setState({list:t})}));case 2:case"end":return t.stop()}}),t)}))),e.handleChange=function(t,a,n){var r,c=e.state.list,o=e.props.idName,i=Object(w.a)(c);try{for(i.s();!(r=i.n()).done;){var l=r.value;if(l[o]===t){l[a]=n;break}}}catch(s){i.e(s)}finally{i.f()}e.setState({list:c})},e.handleDelete=function(t,a){ve(e.props.url,Object(S.a)({},t,a)).then((function(t){e.updateTable()}))},e.handleCheck=function(t,a){var n,r=e.state.list,c=e.props.idName,o=Object(w.a)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i[c]===a){!0===i.checked?i.checked=!1:i.checked=!0;break}}}catch(l){o.e(l)}finally{o.f()}e.setState({list:r})},e.handleDeleteSelected=Object(C.a)(k.a.mark((function t(){var a,n,r,c,o,i,l,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.url,r=a.idName,c=e.state.list,o=Object(w.a)(c),t.prev=3,o.s();case 5:if((i=o.n()).done){t.next=13;break}if(!0!==(l=i.value).checked){t.next=11;break}return s=Object(S.a)({},r,l[r]),t.next=11,ve(n,s);case 11:t.next=5;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),o.e(t.t0);case 18:return t.prev=18,o.f(),t.finish(18);case 21:e.updateTable();case 22:case"end":return t.stop()}}),t,null,[[3,15,18,21]])}))),e.handleRefresh=function(){e.updateTable()},e.dispatch=function(){var t=Object(C.a)(k.a.mark((function t(a,n,r){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="update"===t.t0?3:"create"===t.t0?6:9;break;case 3:return t.next=5,he(r,n);case 5:return t.abrupt("break",10);case 6:return t.next=8,Ee(r,n);case 8:case 9:return t.abrupt("break",10);case 10:e.updateTable();case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.updateTable()}},{key:"render",value:function(){var e=this.state,t=e.list,a=(e.checkedAll,e.rowHeight),n=this.props,c=n.idName,o=n.tableTitle,i=n.tableColumns,l=n.getFormElement,s=Object(x.a)({},xe,{dispatch:this.dispatch});return r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(Y.a,{textAlign:"center",as:"h2"},o)),r.a.createElement(E.a,null,r.a.createElement(E.a.Item,null,r.a.createElement(ce.a,{trigger:r.a.createElement(g.a,null,"Add"),closeIcon:!0,closeOnDimmerClick:!1},l("create",s))),r.a.createElement(E.a.Item,{icon:"minus",as:g.a,name:"Delete Selected",onClick:this.handleDeleteSelected}),r.a.createElement(E.a.Item,{icon:"redo",as:g.a,name:"",onClick:this.handleRefresh})),r.a.createElement(Se.d,{data:t,autoHeight:!0,virtualized:!0,bordered:!0,defaultExpandAllRows:!0,rowHeight:a},r.a.createElement(Se.b,{width:50,align:"center",fixed:!0},r.a.createElement(Se.c,null),r.a.createElement(Pe,{dataKey:"checked",idName:c,onClick:this.handleCheck})),i,r.a.createElement(Se.b,{width:100,sort:"true",resizable:!0,align:"center"},r.a.createElement(Se.c,null,"Edit"),r.a.createElement(Se.a,null,(function(e,t){return r.a.createElement(ce.a,{trigger:r.a.createElement(g.a,null,"Edit"),closeIcon:!0,closeOnDimmerClick:!1},l("update",s,e))}))),r.a.createElement(Se.b,{width:100,sort:"true",resizable:!0,align:"center"},r.a.createElement(Se.c,null,"Delete"),r.a.createElement(Ke,{dataKey:c,onClick:this.handleDelete}))))}}]),a}(n.Component);Ne.defaultProps={};var De=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={columns:[]},e.createAdminCols=Object(C.a)(k.a.mark((function t(){var a,n,c,o,i,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.tableHeaders,n=[],c=0,o=Object(w.a)(a);try{for(o.s();!(i=o.n()).done;)l=i.value,n.push(r.a.createElement(Se.b,{key:c++,width:200,resizable:!0,align:"center"},r.a.createElement(Se.c,null,l.title),r.a.createElement(Se.a,{dataKey:l.dataKey})))}catch(s){o.e(s)}finally{o.f()}e.setState({columns:n});case 6:case"end":return t.stop()}}),t)}))),e.getFormElement=function(e,t,a){return r.a.createElement(J,{rowData:a,type:e,formProps:t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.createAdminCols()}},{key:"render",value:function(){var e=this.state.columns;return console.log(e),r.a.createElement(Ne,Object.assign({},this.props,{tableColumns:e,getFormElement:this.getFormElement}))}}]),a}(n.Component);De.defaultProps={tableHeaders:[{title:"ID",dataKey:"adminId"},{title:"Username",dataKey:"username"},{title:"Password",dataKey:"password"}],url:"/admin",idName:"adminId",tableTitle:"Admin Manage"};var Fe=De,Te=a(1656),Ae=A,Re=function(e){var t=e.rowData,a=e.type,c=e.formProps,o=e.typeOptions,i=K.a.Field,l=c,s=l.getDescriptors,u=l.createStateFromDataProps,m={update:"Edit a film",create:"Add a film"},d={type:{descriptor:{},dataKey:"type",title:"Type",placeholder:"Please enter a film name"},name:{descriptor:{name:[z("name")]},dataKey:"name",title:"Film",placeholder:"Please enter a film name"},director:{descriptor:{director:[z("director")]},dataKey:"director",title:"Director",placeholder:"Please enter a director name"},introduction:{descriptor:{introduction:[z("introduction")]},dataKey:"introduction",title:"Introduction",placeholder:"Please enter introduction"},poster:{descriptor:{poster:[z("poster")]},dataKey:"poster",title:"Poster",placeholder:"Please select a poster"},duration:{descriptor:{duration:[z("duration")]},dataKey:"duration",title:"Duration",placeholder:"Please enter duration"},actors:{descriptor:{actors:[z("actors")]},dataKey:"actors",title:"Actors",placeholder:"Please enter actors"},status:{descriptor:{status:[z("status")]},dataKey:"status",title:"Status",placeholder:"Please enter the status"}},p=Object(n.useState)((function(){var e=void 0!==t,a=u(e,d,t);return Object(x.a)({},a,{filmId:e?t.filmId:"",errMsg:{}})})),f=Object(I.a)(p,2),h=f[0],b=f[1],v=s(d);m=m[a],c=Object(x.a)({},c,{state:h,setState:b,descriptors:v,header:m,dataProps:d,type:a,api:Ae});var y=function(){var e=0,t=[];return t.push(function(e){var t=Object(x.a)({},d.name,{initVal:h.name});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},d.actors,{initVal:h.actors});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},d.director,{initVal:h.director});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},d.introduction,{initVal:h.introduction});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},d.poster,{initVal:h.poster});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},d.status,{initVal:h.status});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){for(var t=d.type,a=t.dataKey,n=t.title,c=t.placeholder,l=h.typeId,s=0,u=0;u<o.length;u++)if(o[u].key===l){s=u;break}return r.a.createElement(i,{key:e,control:Te.a,label:n,options:o,onChange:function(e,t){b(Object(x.a)({},h,{typeId:t.value}))},placeholder:c,name:a,defaultValue:o[s].value,selection:!0})}(e++)),t.push(function(e){var t=Object(x.a)({},d.duration,{initVal:h.duration});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t}();return c=Object(x.a)({},c,{formFields:y}),r.a.createElement(q,{formProps:c})},Me=M,Ve=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={columns:[],typeOptions:[]},e.getTypeOptions=function(){var t=[];pe(Me).then((function(a){var n,r=Object(w.a)(a);try{for(r.s();!(n=r.n()).done;){var c=n.value;t.push({key:c.typeId,value:c.typeId,text:c.type})}}catch(o){r.e(o)}finally{r.f()}e.setState({typeOptions:t})}))},e.createFilmCols=Object(C.a)(k.a.mark((function t(){var a,n,c,o,i,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.tableHeaders,n=[],c=0,o=Object(w.a)(a);try{for(o.s();!(i=o.n()).done;)l=i.value,n.push(r.a.createElement(Se.b,{key:c++,width:100,resizable:!0,align:"center"},r.a.createElement(Se.c,null,l.title),r.a.createElement(Se.a,{dataKey:l.dataKey})))}catch(s){o.e(s)}finally{o.f()}e.setState({columns:n});case 5:case"end":return t.stop()}}),t)}))),e.getFormElement=function(t,a,n){var c=e.state.typeOptions;return r.a.createElement(Re,{rowData:n,type:t,formProps:a,typeOptions:c})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.createFilmCols(),this.getTypeOptions()}},{key:"render",value:function(){var e=this.state.columns;return r.a.createElement(Ne,Object.assign({},this.props,{tableColumns:e,getFormElement:this.getFormElement}))}}]),a}(n.Component);Ve.defaultProps={tableHeaders:[{title:"ID",dataKey:"filmId"},{title:"Type",dataKey:"type"},{title:"Name",dataKey:"name"},{title:"Director",dataKey:"director"},{title:"Introduction",dataKey:"introduction"},{title:"Poster",dataKey:"poster"},{title:"Status",dataKey:"status"},{title:"Actors",dataKey:"actors"},{title:"Rating",dataKey:"rating"}],url:"/film",idName:"filmId",tableTitle:"Film Manage"};var ze=Ve,Le=R,He=function(e){var t=e.rowData,a=e.type,c=e.formProps,o=(K.a.Field,c),i=(o.dispatch,o.updateFormMsg,o.fieldValidate,o.canDispatch,o.getDescriptors),l=o.createStateFromDataProps,s={update:"Edit an order",create:"Add an order"};s=s[a];var u={orderTime:{descriptor:{orderTime:[z("orderTime")]},dataKey:"orderTime",title:"Order time",placeholder:"Please enter order time"},payTime:{descriptor:{payTime:[z("payment time")]},dataKey:"payTime",title:"Payment time",placeholder:"Please enter the payment time"},status:{descriptor:{status:[z("status")]},dataKey:"status",title:"Status",placeholder:"Please enter the order status"},fee:{descriptor:{tefeel:[z("fee")]},dataKey:"fee",title:"Fee",placeholder:"Please enter the fee"}},m=Object(n.useState)((function(){var e=void 0!==t,a=l(e,u,t);return Object(x.a)({},a,{userId:e?t.orderId:"",errMsg:{}})})),d=Object(I.a)(m,2),p=d[0],f=d[1],h=i(u);c=Object(x.a)({},c,{state:p,setState:f,descriptors:h,header:s,dataProps:u,type:a,api:Le});var b=function(){var e=0,t=[];return t.push(function(e){var t=Object(x.a)({},u.orderTime,{initVal:p.orderTime});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},u.payTime,{initVal:p.payTime});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},u.status,{initVal:p.status});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},u.fee,{initVal:p.fee});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t}();return c=Object(x.a)({},c,{formFields:b}),r.a.createElement(q,{formProps:c})},Ue="orderId",Be=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={columns:[],data:{},expandedRowKeys:[]},e.updateTable=Object(C.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:pe(e.props.url).then((function(t){e.setState({list:t})}));case 2:case"end":return t.stop()}}),t)}))),e.handleChange=function(t,a,n){var r,c=e.state.list,o=e.props.idName,i=Object(w.a)(c);try{for(i.s();!(r=i.n()).done;){var l=r.value;if(l[o]===t){l[a]=n;break}}}catch(s){i.e(s)}finally{i.f()}e.setState({list:c})},e.handleDelete=function(t,a){ve(e.props.url,Object(S.a)({},t,a)).then((function(t){e.updateTable()}))},e.handleCheck=function(t,a){var n,r=e.state.list,c=e.props.idName,o=Object(w.a)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i[c]===a){!0===i.checked?i.checked=!1:i.checked=!0;break}}}catch(l){o.e(l)}finally{o.f()}e.setState({list:r})},e.handleDeleteSelected=Object(C.a)(k.a.mark((function t(){var a,n,r,c,o,i,l,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.url,r=a.idName,c=e.state.list,o=Object(w.a)(c),t.prev=3,o.s();case 5:if((i=o.n()).done){t.next=13;break}if(!0!==(l=i.value).checked){t.next=11;break}return s=Object(S.a)({},r,l[r]),t.next=11,ve(n,s);case 11:t.next=5;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),o.e(t.t0);case 18:return t.prev=18,o.f(),t.finish(18);case 21:e.updateTable();case 22:case"end":return t.stop()}}),t,null,[[3,15,18,21]])}))),e.handleRefresh=function(){e.updateTable()},e.dispatch=function(){var t=Object(C.a)(k.a.mark((function t(a,n,r){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="update"===t.t0?3:"create"===t.t0?6:9;break;case 3:return t.next=5,he(r,n);case 5:return t.abrupt("break",10);case 6:return t.next=8,Ee(r,n);case 8:case 9:return t.abrupt("break",10);case 10:e.updateTable();case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.handleExpanded=function(t,a){var n=e.state.expandedRowKeys,r=!1,c=[];n.forEach((function(e){e===t[Ue]?r=!0:c.push(e)})),r||c.push(t[Ue]),e.setState({expandedRowKeys:c})},e.createFilmCols=Object(C.a)(k.a.mark((function t(){var a,n,c,o,i,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.tableHeaders,n=[],c=0,o=Object(w.a)(a);try{for(o.s();!(i=o.n()).done;)l=i.value,n.push(r.a.createElement(Se.b,{key:c++,width:100,resizable:!0,align:"center"},r.a.createElement(Se.c,null,l.title),r.a.createElement(Se.a,{dataKey:l.dataKey})))}catch(s){o.e(s)}finally{o.f()}e.setState({columns:n});case 5:case"end":return t.stop()}}),t)}))),e.getFormElement=function(e,t,a){return r.a.createElement(He,{rowData:a,type:e,formProps:t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.createFilmCols();var t=this.props.url,a={};pe(t).then((function(t){a=t,e.setState({data:a})})),this.updateTable()}},{key:"render",value:function(){var e=this,t=this.props.idName,a=Object(x.a)({},xe,{dispatch:this.dispatch}),n=this.state,c=n.columns,o=n.expandedRowKeys,i=n.data;return r.a.createElement(Se.d,{rowExpandedHeight:600,height:400,data:i,rowKey:Ue,expandedRowKeys:o,onRowClick:function(e){console.log(e)},renderRowExpanded:function(e){var t=e.user,a=(e.session,e.film);e.cinema,e.room;return r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(K.a,null,r.a.createElement(Y.a,{content:"User Info"})," ",r.a.createElement(K.a.Input,{fluid:!0,label:"Username",value:t.username,readOnly:!0}),r.a.createElement(K.a.Input,{fluid:!0,label:"Email",value:t.email,readOnly:!0}))),r.a.createElement(W.a,null,r.a.createElement(K.a,null,r.a.createElement(Y.a,{content:"Film Info"})," ",r.a.createElement(K.a.Input,{fluid:!0,label:"Film",value:a.name,readOnly:!0}),r.a.createElement(K.a.Input,{fluid:!0,label:"Director",value:a.director,readOnly:!0}))))}},r.a.createElement(Se.b,{width:100,align:"center"},r.a.createElement(Se.c,null,"#"),r.a.createElement(We,{dataKey:"id",expandedRowKeys:o,onChange:this.handleExpanded})),c,r.a.createElement(Se.b,{width:100,sort:"true",resizable:!0,align:"center"},r.a.createElement(Se.c,null,"Edit"),r.a.createElement(Se.a,null,(function(t,n){return r.a.createElement(ce.a,{trigger:r.a.createElement(g.a,null,"Edit"),closeIcon:!0,closeOnDimmerClick:!1},e.getFormElement("update",a,t))}))),r.a.createElement(Se.b,{width:100,sort:"true",resizable:!0,align:"center"},r.a.createElement(Se.c,null,"Delete"),r.a.createElement(Ke,{dataKey:t,onClick:this.handleDelete})))}}]),a}(n.Component);Be.defaultProps={tableHeaders:[{title:"ID",dataKey:"orderId"},{title:"Order Time",dataKey:"orderTime"},{title:"Pay Time",dataKey:"payTime"},{title:"Status",dataKey:"status"},{title:"Fee",dataKey:"fee"}],url:"/order",idName:"orderId",tableTitle:"Order Manage"};var We=function(e){var t=e.rowData,a=(e.dataKey,e.expandedRowKeys),n=e.onChange,c=Object(P.a)(e,["rowData","dataKey","expandedRowKeys","onChange"]);return r.a.createElement(Se.a,c,r.a.createElement(g.a,{size:"xs",onClick:function(){n(t)}},a.some((function(e){return e===t[Ue]}))?"-":"+"))},Ye=Be,qe=a(332),Ge=a.n(qe);function Je(e){var t,a="YYYY-mm-dd HH:MM",n={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var r in n)(t=new RegExp("("+r+")").exec(a))&&(a=a.replace(t[1],1==t[1].length?n[r]:n[r].padStart(t[1].length,"0")));return a}a(530);var $e=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={items:[]},e.onDropdownChange=function(){var t=Object(C.a)(k.a.mark((function t(a,n){var r,c,o,i,l,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.url,c=e.child.state.list,o=e.props.idName,i=Object(w.a)(c),t.prev=4,i.s();case 6:if((l=i.n()).done){t.next=16;break}if(s=l.value,a!==s[o]){t.next=14;break}return s[n.dropdownIdName]=n.dropdownItemId,t.next=12,he(r,s);case 12:return e.child.updateTable(),t.abrupt("break",16);case 14:t.next=6;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4),i.e(t.t0);case 21:return t.prev=21,i.f(),t.finish(21);case 24:console.log(c);case 25:case"end":return t.stop()}}),t,null,[[4,18,21,24]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onDatePickerChange=function(){var t=Object(C.a)(k.a.mark((function t(a,n){var r,c,o,i,l,s,u;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,c=r.url,o=r.idName,i=e.child.state.list,l=Object(w.a)(i),t.prev=3,l.s();case 5:if((s=l.n()).done){t.next=15;break}if(u=s.value,n!==u[o]){t.next=13;break}return u.time=a,t.next=11,he(c,u);case 11:return e.child.updateTable(),t.abrupt("break",15);case 13:t.next=5;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),l.e(t.t0);case 20:return t.prev=20,l.f(),t.finish(20);case 23:console.log(i);case 24:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})));return function(e,a){return t.apply(this,arguments)}}(),e.createSessionCols=Object(C.a)(k.a.mark((function t(){var a,n,c,o,i,l,s,u,m,d,p,f,h,b;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.url,c=a.listName,o=a.dataToLabel,i=a.idName,l=[],t.next=4,pe(n,c).then((function(e){l=e}));case 4:s=Object(w.a)(l);try{for(s.s();!(u=s.n()).done;)(m=u.value).cinemaName=m.film.name,m.filmName=m.cinema.name,m.roomName=m.room.roomName}catch(v){s.e(v)}finally{s.f()}console.log("--------"),console.log(l),d=[],0,p=Object.keys(o),f=k.a.mark((function t(){var a,n,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=b[h],n={},c=[],t.t0=a,t.next="cinemaName"===t.t0?6:"filmName"===t.t0?9:"roomName"===t.t0?12:15;break;case 6:return t.next=8,pe("/cinema").then((function(e){c=e,n.tableName="cinema",n.idName="cinemaId",n.value="name",n.url="/cinema"}));case 8:return t.abrupt("break",15);case 9:return t.next=11,pe("/film").then((function(e){c=e,n.tableName="film",n.idName="filmId",n.value="name",n.url="/film"}));case 11:return t.abrupt("break",15);case 12:return t.next=14,pe("/room").then((function(e){c=e,n.tableName="room",n.idName="roomId",n.value="roomName",n.url="/room"}));case 14:return t.abrupt("break",15);case 15:if("cinemaName"!==a&&"filmName"!==a&&"roomName"!==a){t.next=21;break}return n.list=c,d.push(r.a.createElement(Se.b,{key:0,width:100,sort:"true",flexGrow:!0,align:"center"},r.a.createElement(Se.c,null,o[a]),r.a.createElement(_e,{idName:i,dataKey:a,dropdownInfo:n,onChange:e.onDropdownChange}))),t.abrupt("return","continue");case 21:"time"===a?d.push(r.a.createElement(Se.b,{key:0,width:100,sort:"true",resizable:!0,align:"center"},r.a.createElement(Se.c,null,o[a]),r.a.createElement(Qe,{idName:i,dataKey:a,onChange:e.onDatePickerChange}))):d.push(r.a.createElement(Se.b,{key:0,width:100,sort:"true",resizable:!0,align:"center"},r.a.createElement(Se.c,null,o[a]),r.a.createElement(Se.a,{idName:i,dataKey:a,onChange:e.child.handleChange})));case 22:case"end":return t.stop()}}),t)})),h=0,b=p;case 12:if(!(h<b.length)){t.next=20;break}return t.delegateYield(f(),"t0",14);case 14:if("continue"!==t.t0){t.next=17;break}return t.abrupt("continue",17);case 17:h++,t.next=12;break;case 20:return e.setState({items:d}),t.abrupt("return",null);case 22:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){this.createSessionCols()}},{key:"render",value:function(){var e=this,t=this.state.items;return r.a.createElement(Ne,Object.assign({},this.props,{tableColumns:t,onRef:function(t){e.child=t}}))}}]),a}(n.Component);$e.defaultProps={url:"/session",idName:"sessionId",dataToLabel:{sessionId:"ID",cinemaName:"Cinema",time:"Time",remainingSeats:"Remaining Seats",filmName:"Film",roomName:"Room",status:"Status"},listName:"list",tableHeader:"Session Manage",modalHeader:"Add a new session",labelNames:["Cinema","Film","Time","Actors","Rating","Introduction","Poster","Status"],dataNames:["name","duration","director","actors","rating","introduction","poster","status"]};var _e=function(e){var t,a=e.rowData,n=(e.dataKey,e.onChange),c=e.idName,o=e.dropdownInfo,i=(e.onOpen,e.onClose,Object(P.a)(e,["rowData","dataKey","onChange","idName","dropdownInfo","onOpen","onClose"])),l=[],s=Object(w.a)(o.list);try{for(s.s();!(t=s.n()).done;){var u=t.value,m={key:u[o.idName],text:u[o.value],value:u[o.value]};l.push(m)}}catch(d){s.e(d)}finally{s.f()}return r.a.createElement(Se.a,i,r.a.createElement(ce.a,{trigger:r.a.createElement(g.a,{content:a[o.tableName][o.value]})},r.a.createElement(Te.a,{fluid:!0,selection:!0,search:!0,options:l,onChange:function(e,t){var r,i=-1,s=Object(w.a)(l);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(u.value===t.value){i=u.key;break}}}catch(d){s.e(d)}finally{s.f()}var m={dropdownItemId:i,dropdownIdName:o.idName};n(a[c],m)},placeholder:a[o.tableName][o.value]})))},Qe=function(e){var t=e.rowData,a=e.dataKey,c=e.onChange,o=e.idName,i=Object(P.a)(e,["rowData","dataKey","onChange","idName"]),l=Object(n.useState)(),s=Object(I.a)(l,2);s[0],s[1];return r.a.createElement(Se.a,i,r.a.createElement(ce.a,{trigger:r.a.createElement(g.a,{content:t[a]})},r.a.createElement(Ze,{date:t[a],itemId:t[o],onChange:c})))},Xe=$e,Ze=function(e){var t=e.date,a=e.itemId,c=e.onChange,o=(Object(P.a)(e,["date","itemId","onChange"]),Object(n.useState)(new Date(t))),i=Object(I.a)(o,2),l=i[0],s=i[1];return r.a.createElement(Ge.a,{selected:l,onChange:function(e){s(e),c(Je(e),a)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa"})},et=F,tt=function(e){var t=e.rowData,a=e.type,c=e.formProps,o=K.a.Field,i=c,l=(i.dispatch,i.updateFormMsg,i.fieldValidate,i.canDispatch,i.getDescriptors),s=i.createStateFromDataProps,u={update:"Edit a user",create:"Add a user"};u=u[a];var m={username:{descriptor:{username:[z("username")]},dataKey:"username",title:"Username",placeholder:"Please enter username"},password:{descriptor:{password:[z("usepasswordrname")]},dataKey:"password",title:"Password",placeholder:"Please enter password"},email:{descriptor:{email:[z("email")]},dataKey:"email",title:"Email",placeholder:"Please enter your email"},tel:{descriptor:{tel:[z("tel")]},dataKey:"tel",title:"Phone number",placeholder:"Please enter your phone number"},isStudent:{dataKey:"isStudent",title:"Is a student",placeholder:"Are you a student"}},d=Object(n.useState)((function(){var e=void 0!==t,a=s(e,m,t);return Object(x.a)({},a,{userId:e?t.userId:"",errMsg:{}})})),p=Object(I.a)(d,2),f=p[0],h=p[1],b=l(m);c=Object(x.a)({},c,{state:f,setState:h,descriptors:b,header:u,dataProps:m,type:a,api:et});var v=function(){var e=0,t=[];return t.push(function(e){var t=Object(x.a)({},m.username,{initVal:f.username});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},m.password,{initVal:f.password});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},m.email,{initVal:f.email});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=Object(x.a)({},m.tel,{initVal:f.tel});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(e++)),t.push(function(e){var t=m.isStudent,a=t.dataKey,n=t.title,c=t.placeholder,i=0!==f.isStudent;return r.a.createElement(o,{key:e,defaultChecked:i,control:Ie.a,label:n,onChange:function(e,t){var a=t.checked;console.log(t.checked),h(Object(x.a)({},f,{isStudent:!0===a?1:0}))},placeholder:c,name:a})}(e++)),t}();return c=Object(x.a)({},c,{formFields:v}),r.a.createElement(q,{formProps:c})},at=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={columns:[],isStudent:null},e.createUserCols=Object(C.a)(k.a.mark((function t(){var a,n,c,o,i,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.tableHeaders,n=[],c=0,o=Object(w.a)(a),t.prev=3,o.s();case 5:if((i=o.n()).done){t.next=12;break}if("isStudent"!==(l=i.value).dataKey){t.next=9;break}return t.abrupt("continue",10);case 9:n.push(r.a.createElement(Se.b,{key:c++,width:200,resizable:!0,align:"center"},r.a.createElement(Se.c,null,l.title),r.a.createElement(Se.a,{dataKey:l.dataKey})));case 10:t.next=5;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),o.e(t.t0);case 17:return t.prev=17,o.f(),t.finish(17);case 20:n.push(r.a.createElement(Se.b,{key:c++,width:200,resizable:!0,align:"center"},r.a.createElement(Se.c,null,"isStudent"),r.a.createElement(Se.a,null,(function(e,t){return 0!==e.isStudent?"True":"False"})))),e.setState({columns:n});case 22:case"end":return t.stop()}}),t,null,[[3,14,17,20]])}))),e.getFormElement=function(e,t,a){return r.a.createElement(tt,{rowData:a,type:e,formProps:t})},e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){this.createUserCols()}},{key:"render",value:function(){var e=this.state.columns;return r.a.createElement(Ne,Object.assign({},this.props,{tableColumns:e,getFormElement:this.getFormElement}))}}]),a}(n.Component);at.defaultProps={tableHeaders:[{title:"ID",dataKey:"userId"},{title:"Username",dataKey:"username"},{title:"Email",dataKey:"email"},{title:"Password",dataKey:"password"},{title:"Phone Number",dataKey:"tel"},{title:"Student",dataKey:"isStudent"}],url:"/user",idName:"userId",tableTitle:"User Manage"};var nt=at,rt=T,ct=function(e){var t=e.rowData,a=e.type,c=e.formProps,o={update:"Edit a cinema",create:"Add a cinema"},i={name:{descriptor:{name:[z("Cinema")]},dataKey:"name",title:"Cinema",placeholder:"Please enter a cinema name"},tel:{descriptor:{tel:[z("cinema contact")]},dataKey:"tel",title:"Telephone number",placeholder:"Please enter the cinema contact"},location:{descriptor:{location:[z("location")]},dataKey:"location",title:"Location",placeholder:"Please enter the location"}};o=o[a];K.a.Field;var l=c,s=(l.dispatch,l.updateFormMsg,l.fieldValidate,l.canDispatch,l.getDescriptors),u=l.createStateFromDataProps,m=(l.clearInputVal,Object(n.useState)((function(){var e=void 0!==t,a=u(e,i,t);return Object(x.a)({},a,{cinemaId:e?t.cinemaId:"",errMsg:{}})}))),d=Object(I.a)(m,2),p=d[0],f=d[1],h=s(i);c=Object(x.a)({},c,{state:p,setState:f,descriptors:h,header:o,dataProps:i,type:a,api:rt});var b=function(){var e=[],t=0;return e.push(function(e){var t=Object(x.a)({},i.name,{initVal:p.name});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(t++)),e.push(function(e){var t=Object(x.a)({},i.location,{initVal:p.location});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(t++)),e.push(function(e){var t=Object(x.a)({},i.tel,{initVal:p.tel});return c=Object(x.a)({},c,{},t),r.a.createElement(D,{key:e,formProps:c})}(t++)),e}();return c=Object(x.a)({},c,{formFields:b}),r.a.createElement(q,{formProps:c})},ot=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={columns:[]},e.createCinemaCols=Object(C.a)(k.a.mark((function t(){var a,n,c,o,i,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.tableHeaders,n=[],c=0,o=Object(w.a)(a);try{for(o.s();!(i=o.n()).done;)l=i.value,n.push(r.a.createElement(Se.b,{key:c++,width:200,resizable:!0,align:"center"},r.a.createElement(Se.c,null,l.title),r.a.createElement(Se.a,{dataKey:l.dataKey})))}catch(s){o.e(s)}finally{o.f()}e.setState({columns:n});case 6:case"end":return t.stop()}}),t)}))),e.getFormElement=function(e,t,a){return r.a.createElement(ct,{rowData:a,type:e,formProps:t})},e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){this.createCinemaCols()}},{key:"render",value:function(){var e=this.state.columns;return console.log(e),r.a.createElement(Ne,Object.assign({},this.props,{tableColumns:e,getFormElement:this.getFormElement}))}}]),a}(n.Component);ot.defaultProps={tableHeaders:[{title:"ID",dataKey:"cinemaId"},{title:"Name",dataKey:"name"},{title:"Location",dataKey:"location"},{title:"Tel",dataKey:"tel"}],url:"/cinema",idName:"cinemaId",tableTitle:"Cinema Manage"};var it=ot,lt=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(n.Component),st=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e}return Object(d.a)(a,[{key:"handleClick",value:function(){var e=this.state.visible;e=!e,this.setState({visible:e})}},{key:"render",value:function(){var e=this.state.visible,t={minHeight:document.body.clientHeight+"px"};return r.a.createElement(v.a.Pushable,null,r.a.createElement(y.a,{columns:1},r.a.createElement(y.a.Row,{stretched:!0},r.a.createElement(y.a.Column,{style:t},r.a.createElement(O,{visible:e}),r.a.createElement(v.a.Pusher,null,r.a.createElement(E.a,null,r.a.createElement(E.a.Item,{as:g.a,icon:"sidebar",onClick:this.handleClick.bind(this)})),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/admin/admin-manage",component:Fe}),r.a.createElement(s.a,{path:"/admin/order-manage",component:Ye}),r.a.createElement(s.a,{path:"/admin/session-manage",component:Xe}),r.a.createElement(s.a,{path:"/admin/film-manage",component:ze}),r.a.createElement(s.a,{path:"/admin/cinema-manage",component:it}),r.a.createElement(s.a,{path:"/admin/comment-manage",component:lt}),r.a.createElement(s.a,{path:"/admin/user-manage",component:nt})))))))}}]),a}(n.Component),ut=(a(197),{userId:""}),mt="saveUserId",dt="clearUserId",pt=function(e){return console.log("UserId is ".concat(e)),{type:mt,data:e}},ft=function(){return{type:dt,data:""}},ht=a(2),bt=a.n(ht),vt=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={proof:"",password:""},e}return Object(d.a)(a,[{key:"submit",value:function(){var e=this,t=this.state,a=t.proof,n=t.password,r=this.props.saveUserId;(function(e){return ke.apply(this,arguments)})({proof:a,password:n}).then((function(t){console.log("UserId is ".concat(t.data.userId)),r(t.data.userId),setTimeout(e.props.history.replace("/index"),1e3)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.proof,n=t.password;return r.a.createElement(K.a,{onSubmit:this.submit.bind(this)},r.a.createElement(W.a,{stacked:!0},r.a.createElement(K.a.Field,null,r.a.createElement(N.a,{icon:"user",placeholder:"Username or email",type:"text",value:a,onChange:function(t){return e.setState({proof:t.target.value})}})),r.a.createElement(K.a.Field,null,r.a.createElement(N.a,{icon:"lock",placeholder:"Password",type:"password",value:n,onChange:function(t){return e.setState({password:t.target.value})}})),r.a.createElement(g.a,{primary:!0,type:"submit",fluid:!0},"Login")),r.a.createElement(oe.a,null,r.a.createElement(l.b,{to:"/forget-pwd"},"Forget password?")," ",r.a.createElement(l.b,{to:"/register",style:{float:"right"}},"Register")))}}]),a}(n.Component);vt.contextTypes={router:bt.a.object.isRequired};var yt=Object(s.f)(Object(i.b)((function(e,t){return{userId:e.user.userId}}),(function(e,t){return{saveUserId:Object(u.a)(pt,e)}}))(vt)),Et=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,{container:!0,centered:!0,textAlign:"center",style:{marginTop:"10%"},verticalAlign:"middle"},r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Column,{width:8},r.a.createElement(Y.a,{as:"h1",textAlign:"center"},"Login in"),r.a.createElement(yt,null))," "))}}]),a}(n.Component);Et.contextTypes={router:bt.a.object.isRequired};var gt=Object(i.b)((function(e,t){return{}}),(function(e,t){return{}}))(Et),Ot=(a(587),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isStudent:0,username:"",password:"",email:"",rePassword:"",errorInfo:{header:"",show:!1,contentList:[]}},e.submit=function(){var t=e.props,a=t.descriptor,n=t.history,r=e.state,c=r.email,o=r.password,i=r.username,l=r.rePassword,s=r.isStudent,u=r.errorInfo;u.contentList=[];var m=new $.a(a),d={username:i,email:c,password:o,rePassword:l,isStudent:s};m.validate(d).then(function(){var t=Object(C.a)(k.a.mark((function t(a){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==l){t.next=8;break}return t.next=3,Ee("/user",d);case 3:se.show("Sign up","Successfully!"),setTimeout(n.push("/index"),1e3),u.show=!1,t.next=10;break;case 8:u.contentList.push("passwords are not same"),u.show=!0;case 10:e.setState({errorInfo:u});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){var a=t.errors;t.fields;u.header="Error";var n,r=Object(w.a)(a);try{for(r.s();!(n=r.n()).done;){var c=n.value;u.contentList.push(c.message)}}catch(o){r.e(o)}finally{r.f()}u.show=!0,e.setState({errorInfo:u})}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.isStudent,n=t.errorInfo;return r.a.createElement(y.a,{centered:!0},r.a.createElement(y.a.Column,{width:8},r.a.createElement(K.a,{onSubmit:this.submit},r.a.createElement(W.a,null,r.a.createElement(K.a.Field,{control:N.a,icon:"user",placeholder:"Username",type:"text",onChange:function(t){return e.setState({username:t.target.value})},value:this.props.username}),r.a.createElement(K.a.Field,{control:N.a,icon:"mail",placeholder:"Email",type:"text",onChange:function(t){return e.setState({email:t.target.value})},value:this.props.email}),r.a.createElement(K.a.Field,{control:N.a,icon:"lock",placeholder:"Enter password",type:"password",onChange:function(t){return e.setState({password:t.target.value})},value:this.props.password}),r.a.createElement(K.a.Field,{control:N.a,placeholder:"Enter password again",type:"password",icon:"lock",onChange:function(t){return e.setState({rePassword:t.target.value})}}),r.a.createElement(K.a.Field,{control:Ie.a,toggle:!0,label:"Are you a student?",onClick:function(){e.setState({isStudent:!a})}}),a?r.a.createElement(K.a.Input,{placeholder:"Enter your student ID"}):"",n.show?r.a.createElement(wt,{errorInfo:n}):"",r.a.createElement(K.a.Button,{primary:!0,type:"submit",className:"btn",fluid:!0},"Sign up")),r.a.createElement(oe.a,null,r.a.createElement(l.b,null,"Forget password?")))))}}]),a}(n.Component));Ot.defaultProps={descriptor:{username:[z("Username"),L(3,10,"Username"),U(H.string),B("/user/username-duplication","username")],password:[z("password"),L(3,10)],email:[z("Email"),U(H.email)]}};var jt=Object(i.b)((function(e,t){return{}}),(function(e,t){return{}}))(Ot),kt=Object(s.f)(jt),wt=function(e){var t=e.errorInfo,a=(t.show,t.header),n=t.contentList;return r.a.createElement(oe.a,{header:a,list:n})},Ct=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=document.body.clientHeight;return r.a.createElement(y.a,{verticalAlign:"middle",className:"my_container"},r.a.createElement(y.a.Row,{style:{height:e+"px"}},r.a.createElement(y.a.Column,{width:8},r.a.createElement(oe.a,null,"Enjoy Movie")," "),r.a.createElement(y.a.Column,{width:8},r.a.createElement(kt,null))))}}]),a}(n.Component),xt=Object(i.b)()(Ct),It=a(69),St=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={activeItem:""},e}return Object(d.a)(a,[{key:"render",value:function(){window.sessionStorage;var e=this.state.activeItem;return r.a.createElement(y.a,null,r.a.createElement(y.a.Row,{columns:1,verticalAlign:"middle"},r.a.createElement(y.a.Column,{width:16},r.a.createElement(E.a,null,r.a.createElement(l.c,{to:"/index"},r.a.createElement(E.a.Item,{icon:"home",name:"Index",active:"index"===e,onClick:this.handleItemClick},r.a.createElement(It.a,{name:"home"}),"Index")),r.a.createElement(l.c,{to:"/cinema"},r.a.createElement(E.a.Item,{name:"Cinema",active:"cinema"===e,onClick:this.handleItemClick},r.a.createElement(It.a,{name:"video"}),"Cinema")),r.a.createElement(l.c,{to:"/film"},r.a.createElement(E.a.Item,{name:"films",active:"films"===e,onClick:this.handleItemClick},r.a.createElement(It.a,{name:"film"}),"Films")),r.a.createElement(E.a.Menu,{position:"right"},r.a.createElement(l.c,{to:"/profile"}," ",r.a.createElement(E.a.Item,{name:"profile",active:"profile"===e,onClick:this.handleItemClick},r.a.createElement(It.a,{name:"user"}))),r.a.createElement(E.a.Item,null,r.a.createElement(N.a,{type:"text",icon:"search",placeholder:"Search Films..."})))))))}}]),a}(n.Component),Pt=a(147),Kt=a(1658),Nt=a(336),Dt=a(1666);function Ft(e,t){var a="https://picsum.photos/";return void 0===e&&void 0===t?a+"480/320":void 0!==e&&void 0===t?a+e:a+e+"/"+t}var Tt=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={filmList:[]},e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=[];pe("/film").then((function(a){t=a,e.setState({filmList:t})})),console.log(t)}},{key:"render",value:function(){var e=this.state.filmList,t=[];return void 0===e&&(e=[]),e.map((function(e,a){return t.push(r.a.createElement(y.a.Column,{textAlign:"center"},r.a.createElement(At,{key:a,filmData:e}))),null})),r.a.createElement(y.a,{container:!0,columns:4,celled:!0},r.a.createElement(y.a.Row,null,t))}}]),a}(n.Component),At=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n.handleOnRate=n.handleOnRate.bind(Object(Pt.a)(n)),n}return Object(d.a)(a,[{key:"handleOnRate",value:function(e,t){t.rating,t.maxRating}},{key:"render",value:function(){var e=this.props.filmData;return r.a.createElement(Kt.a,{size:"large",centered:!0,style:{width:"115px"}},r.a.createElement(l.b,{to:"/film/"+e.filmId},r.a.createElement(Nt.a,{size:"big",style:{width:"115px",height:"163px"},src:Ft(115,163)}),r.a.createElement(Kt.a.Content,null,e.name)),r.a.createElement(Dt.a,{defaultRating:3,onRate:this.handleOnRate,maxRating:5,icon:"star outline"})," ")}}]),a}(n.Component),Rt=a(1657),Mt=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={list:[],cols:[],sessionList:[]},e.handleBook=function(t){var a=e.props.history;setTimeout(a.push("/session/"+t),500)},e.createAdminCols=function(){var t=e.props,a=(t.url,t.dataToLabel),n=t.idName,c=[];Object.keys(a).forEach((function(e){c.push(r.a.createElement(Se.b,{width:100,align:"center",flexGrow:!0},r.a.createElement(Se.c,null,a[e]),r.a.createElement(Se.a,{dataKey:e,idName:n})))})),c.push(r.a.createElement(Se.b,{width:100,align:"center",flexGrow:!0},r.a.createElement(Se.c,null,"Action"),r.a.createElement(Se.a,{dataKey:n,idName:n},(function(t){return r.a.createElement(g.a,{content:"Book",onClick:function(){e.handleBook(t[n])}})})))),e.setState({cols:c})},e}return Object(d.a)(a,[{key:"componentWillReceiveProps",value:function(e){console.log(e.sessionList),this.createAdminCols()}},{key:"render",value:function(){var e,t=this.props.sessionList,a=Object.assign([],t),n=Object(w.a)(a);try{for(n.s();!(e=n.n()).done;){var c=e.value;console.log(c),c.cinemaName=c.cinema.name,c.filmName=c.film.name,c.roomName=c.room.roomName}}catch(i){n.e(i)}finally{n.f()}var o=this.state.cols;return r.a.createElement(Se.d,{data:t,autoHeight:!0,bordered:!0,defaultExpandAllRows:!0},o)}}]),a}(n.Component);Mt.defaultProps={url:"/session",idName:"sessionId",dataToLabel:{sessionId:"ID",cinemaName:"Cinema",time:"Time",remainingSeats:"Remaining Seats",filmName:"Film",roomName:"Room",status:"Status"},listName:"list"};var Vt=Object(s.f)(Mt),zt=a(588),Lt=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={filmData:{},name:"",duration:0,actors:"",director:"",rating:0,type:"",poster:"",introduction:"",status:"",sessionList:[]},e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id;console.log(t),Oe("/film/"+t).then((function(t){e.setState({filmData:t})}))}},{key:"render",value:function(){var e=this.state.filmData,t=[],a=e.sessionList;if(0!==e.duration&&void 0!==e.duration&&null!==e.duration||(e.duration=zt.random.number()),null===e.actors){e.actors="";for(var n=0;n<5;n++)e.actors+=zt.name.findName()+", ";e.actors+=zt.name.findName()+""}null!==e.type&&void 0!==e.type||(e.type=zt.hacker.noun()),null!==e.introduction&&void 0!==e.introduction||(e.introduction=zt.lorem.paragraph());return t.push(r.a.createElement(Rt.a,{celled:!0,relaxed:!0,size:"large"},r.a.createElement(Rt.a.Item,null,r.a.createElement(Nt.a,{src:Ft(500)})),r.a.createElement(Rt.a.Item,{header:"Film Name:",content:e.name}),r.a.createElement(Rt.a.Item,{header:"Duration:",content:e.duration+" min"}),r.a.createElement(Rt.a.Item,{header:"Actors:",content:e.actors}),r.a.createElement(Rt.a.Item,{header:"Type:",content:e.type}),r.a.createElement(Rt.a.Item,{header:"rating:",content:e.rating}),r.a.createElement(Rt.a.Item,{header:"introduction:",content:e.introduction}),r.a.createElement(Rt.a.Item,{header:"status:",content:e.status}))),r.a.createElement(y.a,{centered:!0},r.a.createElement(y.a.Row,{textAlign:"left",columns:2},r.a.createElement(y.a.Column,{width:8},t)),r.a.createElement(y.a.Row,{textAlign:"left",columns:2},r.a.createElement(y.a.Column,{width:15}," ",r.a.createElement(Vt,{sessionList:a})," ")))}}]),a}(n.Component),Ht={color:"#5f6368",fontFamily:"Roboto,Arial,sans-serif",fontSize:"11px"},Ut={color:"#202124",fontFamily:"Roboto,Arial,sans-serif",fontSize:"16px"},Bt=function(e){var t=e.meta,a=e.info,n=e.editable,c=e.dataKey,o=e.onEditChange;e.onEditClick;return r.a.createElement(W.a,{size:"large"},r.a.createElement(y.a,{columns:2},r.a.createElement(y.a.Row,{verticalAlign:"middle"},r.a.createElement(y.a.Column,{style:Ht},t),r.a.createElement(y.a.Column,{style:Ut,textAlign:"center"},!0===n?r.a.createElement(N.a,{defaultValue:a,onChange:function(e){o(c,e.target.value)}}):a),r.a.createElement(y.a.Column,{textAlign:"right"}))))},Wt=a(1654),Yt={color:"#5f6368",fontFamily:"Roboto,Arial,sans-serif",fontSize:"11px"},qt={color:"#202124",fontFamily:"Roboto,Arial,sans-serif",fontSize:"16px"},Gt=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{},checked:!1,confirmOpened:!1},e.onEditChange=function(t,a){var n=e.state,r=n.user;n.checked;r[t]=a,e.setState({user:r})},e.handleCheckBox=function(t){var a=e.state,n=a.user,r=a.checked;e.setState({checked:!r}),n.isStudent=!r,he("/user",n)},e.onEditClick=function(t){var a=e.state,n=a.user;a.checked;!0===n.editable&&he("/user",n),n.editable=!n.editable,console.log(n.editable),e.setState({user:n})},e.handleLogout=function(){var t=e.props,a=t.history,n=t.clearUserId;te(),n(),a.push("/index")},e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=Object(C.a)(k.a.mark((function e(){var t,a,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.user,a=-1,e.next=4,ne().then((function(e){a=e.userId}));case 4:Oe("/user/"+a).then((function(e){t=e,n.setState({user:t}),1===t.isStudent&&n.setState({checked:!0})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUpdate",value:function(){}},{key:"render",value:function(){for(var e=this,t=[],a=this.state,n=a.user,c=a.checked,o=a.confirmOpened,i=this.props.dataNameToMeta,l=n.editable,s=0,u=Object.keys(i);s<u.length;s++){var m=u[s],d=i[m],p=n[m];"isStudent"!==m?t.push(r.a.createElement(Bt,{meta:d,info:p,dataKey:m,onEditChange:this.onEditChange,editable:l,onEditClick:this.onEditClick})):t.push(r.a.createElement(W.a,{size:"large"},r.a.createElement(y.a,{columns:2},r.a.createElement(y.a.Row,{verticalAlign:"middle"},r.a.createElement(y.a.Column,{style:Yt},d),r.a.createElement(y.a.Column,{style:qt,textAlign:"center"},r.a.createElement(Ie.a,{checked:c,onChange:this.handleCheckBox}))))))}return r.a.createElement(y.a,null,r.a.createElement(y.a.Row,{centered:!0},r.a.createElement(y.a.Column,{width:12},r.a.createElement(W.a.Group,{content:""},t),r.a.createElement(g.a,{floated:"left",color:"green",size:"large",content:l?"Save":"Edit",onClick:this.onEditClick}),r.a.createElement(g.a,{floated:"right",negative:!0,size:"large",content:"Log out",onClick:function(t){e.setState({confirmOpened:!0})}}),r.a.createElement(Wt.a,{open:o,onCancel:function(t){e.setState({confirmOpened:!1})},onConfirm:function(t){e.handleLogout(),e.setState({confirmOpened:!1})}}))))}}]),a}(n.Component);Gt.defaultProps={dataNameToMeta:{username:"Username",password:"Password",email:"Email",tel:"Phone",isStudent:"Is a student"}};var Jt=Object(i.b)((function(e,t){return{userId:e.user.userId}}),(function(e,t){return{clearUserId:Object(u.a)(ft,e)}}))(Gt),$t=(a(1635),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={segments:[],film:{},cinema:{},room:{}},e.handleBook=Object(C.a)(k.a.mark((function t(){var a,n,r,c,o,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.history,n=e.state.data,r=e.props.match.params.id,c=Je(c=new Date),o=-1,t.next=8,ne().then((function(e){o=e.userId,console.log("===================================="),console.log(e),console.log("====================================")}));case 8:return i={userId:o,sessionId:r,orderTime:c,payTime:c,status:"has paid",fee:n.price},t.next=11,Ee("/order",i).then((function(e){se.show("Order","the order is creating"),a.push("/profile")}));case 11:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=this;Oe("/session/"+this.props.match.params.id).then((function(t){var a=t.film,n=t.cinema,r=t.room;t.filmName=a.name,t.cinemaName=n.name,t.roomName=r.roomName,e.setState({data:t,film:a,cinema:n,room:r})}))}},{key:"render",value:function(){var e=[],t=this.state.data;t=Object.assign({},t);var a=this.props,n=a.dataToLabel;a.history;return n=Object.assign({},n),Object.keys(n).forEach((function(a){e.push(r.a.createElement(Bt,{meta:n[a],info:t[a],editable:!1}))})),r.a.createElement(y.a,null,r.a.createElement(y.a.Row,{centered:!0},r.a.createElement(y.a.Column,{width:12},r.a.createElement(Y.a,{size:"huge"},"Session Detail"),r.a.createElement(W.a.Group,null,e),r.a.createElement(g.a,{floated:"right",basic:!0,size:"massive",content:"Book!",onClick:this.handleBook}))))}}]),a}(n.Component));$t.defaultProps={dataToLabel:{filmName:"Film",time:"Time",status:"Status",remainingSeats:"Remaining seats",cinemaName:"Cinema",roomName:"Room",price:"Price"}};var _t=Object(i.b)((function(e,t){return{userId:e.user.userId}}),(function(e,t){return{}}))($t);function Qt(e){ae()||setTimeout((function(){e.replace("/login")}),1e3)}var Xt=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentWillMount",value:function(){Qt(this.props.history)}},{key:"componentWillUpdate",value:function(){Qt(this.props.history)}},{key:"render",value:function(){var e=this.props,t=e.component,a=Object(P.a)(e,["component"]);return ae()?r.a.createElement(s.a,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(oe.a,{error:!0,size:"massive"},"Please Login...")}}]),a}(n.Component),Zt=Object(s.f)(Xt),ea=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Column,null,r.a.createElement(St,null))),r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Column,{width:16},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/register",component:xt}),r.a.createElement(Zt,{exact:!0,path:"/profile",component:Jt}),r.a.createElement(s.a,{exact:!0,path:"/login",component:gt}),r.a.createElement(Zt,{exact:!0,path:"/film/:id",component:Lt}),r.a.createElement(Zt,{exact:!0,path:"/session/:id",component:_t}),r.a.createElement(Zt,{path:"/index",component:Tt}),r.a.createElement(Zt,{path:"/",component:Tt})))))}}]),a}(n.Component),ta=(n.Component,a(1636),Object(u.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mt:return Object(x.a)({},e,{userId:t.data});case dt:return Object(x.a)({},e,{userId:-1});default:return e}}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var aa=Object(u.c)(ta);o.a.render(r.a.createElement(l.a,null,r.a.createElement(i.a,{store:aa},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/admin",component:st}),r.a.createElement(s.a,{path:"/index",component:ea}),r.a.createElement(s.a,{path:"/",component:ea})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},348:function(e,t,a){e.exports=a(1637)},587:function(e,t,a){e.exports=a.p+"static/media/poster.e21d4c71.jpg"}},[[348,1,2]]]);
//# sourceMappingURL=main.662d73c1.chunk.js.map